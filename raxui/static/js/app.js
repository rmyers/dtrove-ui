"use strict";function MainCntl(a,b,c,d,e){a.$route=b,a.$location=d,a.$routeParams=c,a.account=e}function IndexController(a){a.page="index"}function SignupController(a,b,c,d,e){a.page="signup",a.account=e,a.submit=function(){a.password!=a.confirm?a.error="Passwords do not match!":b.post("/accounts/signup/",jQuery.param(a.user),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b){c.loginConfirmed(),a.username="",a.password="",a.error=!1,a.account=b,d.location.href="/dashboard"}).error(function(b){a.error=b.message})}}function SignupControllerResolve(a){var b=a.defer();return alert("delay"),setTimeout(b.resolve,5e3),b.promise}function DashboardController(a,b,c,d){d.query({},function(a){b.projects=a.models}),c.query({},function(a){b.groups=a.models}),b.submit=function(){var a=new d(b.project);a.$save(),b.projects.push(a)}}function ProjectController(a,b,c,d,e,f){console.log("boo"),b.account=e,f.query({},function(a){b.projects=a.models}),console.log(d),d.projectId&&(b.myProject=f.get({projectId:d.projectId})),b.submit=function(){var a=new f(b.project);a.$save(),b.projects.push(a)}}function PeopleController(a,b,c){c.query({},function(a){b.users=a.models})}function LoginController(a,b,c,d,e){a.page="signup",a.account=e,a.submit=function(){console.log(a.account),b.post("/accounts/signin/",jQuery.param(a.user),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b){console.log(b),c.loginConfirmed(),a.error=!1,a.account=b,d.location.href="/dashboard"}).error(function(b){a.error=b.message})}}var myApp=angular.module("myApp",["myApp.filters","myApp.services","myApp.directives","ngCookies","http-auth-interceptor"]);myApp.config(["$routeProvider",function(a){a.when("/dashboard",{templateUrl:"/static/partials/dashboard.html",controller:DashboardController}).when("/signin",{templateUrl:"/static/partials/signin.html",controller:LoginController}).when("/signup",{templateUrl:"/static/partials/signup.html",controller:SignupController}).when("/project/:projectId",{templateUrl:"/static/partials/project.html",conroller:ProjectController}).when("/people",{templateUrl:"/static/partials/people.html",controller:PeopleController}).when("/",{templateUrl:"/static/partials/index.html",controller:IndexController}).otherwise({redirectTo:"/"})}]),myApp.config(["$locationProvider",function(a){a.html5Mode(!0).hashPrefix("!")}]),MainCntl.$inject=["$scope","$route","$routeParams","$location","People"],DashboardController.$inject=["$resource","$scope","Group","Project"],LoginController.$inject=["$scope","$http","authService","$window","User"],PeopleController.$inject=["$resource","$scope","People"],SignupController.$inject=["$scope","$http","authService","$window","User"],IndexController.$inject=["$scope","User"],ProjectController.$inject=["$resource","$scope","$route","$routeParams","User","Project"],angular.module("myApp.directives",[]).directive("whenScrolled",function(){return function(a,b,c){var d=b[0];b.bind("scroll",function(){d.scrollTop+d.offsetHeight>=d.scrollHeight&&a.$apply(c.whenScrolled)})}}).directive("carouselWidget",function(){return function(a,b){var c=$(b[0]);c.carousel(),console.log(c)}}).directive("loginForm",function(){return{restrict:"C",link:function(a,b){var c=$(b[0]);a.$on("event:auth-loginRequired",function(){c.modal("show")}),a.$on("event:auth-loginConfirmed",function(){c.modal("hide")})}}}),angular.module("myApp.filters",[]).filter("interpolate",["version",function(a){return function(b){return String(b).replace(/\%VERSION\%/gm,a)}}]),angular.module("myApp.services",["ngResource"]).factory("People",function(a){return a("../api/v1/user/:userId",{},{query:{method:"GET",params:{limit:10}},isArray:!1})}).factory("Group",function(a){return a("/api/v1/group/:groupId",{},{query:{method:"GET",params:{limit:100}},isArray:!1})}).factory("Event",function(a){return a("/api/v1/group/:groupId/event/:eventId",{},{query:{method:"GET",params:{limit:100}},isArray:!1})}).factory("Project",function(a){return a("/api/v1/project/:projectId",{},{query:{method:"GET",params:{limit:100}},isArray:!1})}).factory("User",function(){return{user_id:0,name:null}});